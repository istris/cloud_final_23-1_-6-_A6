FROM alpine:3.16

# 安装Python3和构建工具
RUN apk add --no-cache python3 py3-pip

# 更新pip到最新版本
RUN pip3 install --upgrade pip

WORKDIR /app

# 复制依赖文件
COPY src/requirements.txt .

# 安装Python依赖
RUN pip3 install --no-cache-dir -r requirements.txt

# 复制应用代码
COPY src/app.py .

# 暴露端口
EXPOSE 8080

# 环境变量默认值
ENV APP_NAME="Basic Docker App"
ENV APP_VERSION="1.0"
ENV PORT=8080
ENV PYTHONDONTWRITEBYTECODE=1
ENV PYTHONUNBUFFERED=1

# 运行命令
CMD ["python3", "app.py"]
